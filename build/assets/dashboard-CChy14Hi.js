import{c as p,j as e,r as u}from"./Triangle-Dhpe70Hh.js";import{A as f,a as g}from"./index-CIk__nF0.js";function j({initialContacts:l=[]}){const[r,c]=u.useState(l||[]),i=()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),d=window.__USER_NAME__||"User",x=async()=>{try{const t=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");(await g.post("/logout",{},{headers:{"X-CSRF-TOKEN":t,Accept:"application/json"}})).status===200&&(window.location.href="/login")}catch(t){console.error("Logout error:",t.response?.status),alert("Logout failed")}},m=async t=>{if(confirm("Are you sure you want to delete this contact?"))try{const s=window.__DELETE_URL_BASE__||"/contacts",a=await fetch(`${s}/${t}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":i()||"",Accept:"application/json"}});if(a.ok)c(o=>o.filter(h=>h.id!==t));else{const o=await a.text();console.error("Delete failed",a.status,o),alert("Delete failed")}}catch(s){console.error(s),alert("Delete failed")}};return!r||r.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No contacts found."}):e.jsxs("div",{className:"relative -h",children:[e.jsx("div",{className:" min-h-screen justify-center bg-slate-950 absolute inset-0 -z-10",children:e.jsx(f,{})}),e.jsxs("header",{className:"fixed -top-27 -left-113 -z-5 flex items-center space-x-6",children:[e.jsx("img",{src:"/images/logo-b9.png",alt:"Logo",className:"scale-11"}),e.jsx("img",{src:"/images/menu.png",alt:"Menu",className:"ml-285 scale-90"})]}),e.jsxs("div",{className:"relative z-20 pt-32 pl-20 pr-20 ",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-white font-bold text-3xl",children:["Welcome ",d,"!"]}),e.jsx("button",{onClick:x,className:" bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Logout"})]}),e.jsx("p",{className:"text-white text-[22px] pb-5",children:"here is your inbox :"}),e.jsxs("table",{className:"min-w-full bg-white borde shadow rounded-lg",children:[e.jsx("thead",{className:"",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-gray-700 font-semibold",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-700 font-semibold",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-700 font-semibold",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-700 font-semibold",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-gray-700 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-6 py-4",children:t.id}),e.jsx("td",{className:"px-6 py-4",children:t.name}),e.jsx("td",{className:"px-6 py-4",children:t.email}),e.jsx("td",{className:"px-6 py-4",children:t.message}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("button",{onClick:()=>alert("Not Yet Implemented"),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mr-5",children:"Approve"}),e.jsx("button",{onClick:()=>m(t.id),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Delete"})]})]},t.id))})]})]})]})}const n=document.getElementById("admin-root");n&&p.createRoot(n).render(e.jsx(j,{initialContacts:window.__INITIAL_CONTACTS__||[]}));
